/**
 * angular-sofa-lazy-validation - v0.1.0 - Wed Apr 22 2015 11:50:20 GMT+0200 (CEST)
 * http://www.sofa.io
 *
 * Copyright (c) 2014 CouchCommerce GmbH (http://www.couchcommerce.com / http://www.sofa.io) and other contributors
 * THIS SOFTWARE CONTAINS COMPONENTS OF THE SOFA.IO COUCHCOMMERCE SDK (WWW.SOFA.IO)
 * IT IS PROVIDED UNDER THE LICENSE TERMS OF THE ATTACHED LICENSE.TXT.
 */
!function(a){a.module("sofa.lazyValidation",[]).directive("sofaLazyValidation",function(){"use strict";var a=2e3;return{restrict:"A",require:"ngModel",link:function(i,n,o,l){var t=a,d=!1;o.sofaLazyValidation&&"number"==typeof i.$eval(o.sofaLazyValidation)&&(t=i.$eval(o.sofaLazyValidation));var f=function(){d||(c(),d=!0),l.$valid?r():l.$dirty&&e()},e=sofa.Util.debounce(function(a){!a&&(void 0===n[0].value||n[0].value.length>0)&&v()},t),u=function(){l.$dirty&&(l.$valid?r():v())},r=function(){e(!0),i.$apply(function(){l.sofaValid=!0,l.sofaInvalid=!1})},v=function(){i.$apply(function(){l.sofaValid=!1,l.sofaInvalid=!0})};n.bind("keyup keydown",f),n.bind("blur",u);var c=i.$watch(function(){return l.$viewValue},function(a){a&&a.length&&(l.sofaValid=l.$valid,l.sofaInvalid=l.$invalid,c(),d=!0)});l.sofaValid=!1,l.sofaInvalid=!1}}})}(angular);